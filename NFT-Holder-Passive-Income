pragma solidity ^0.8.0;

contract NFTGame {
    uint256 public constant INCOME_RATE = 1; // Income rate in percentage
    mapping (address => uint256) public balances;

    // Event for income distribution
    event IncomeDistributed(address indexed to, uint256 amount);

    // Function to distribute income to all NFT holders
    function distributeIncome() public {
        uint256 totalIncome = 0;

        // Calculate total income generated by the game
        for (address user in balances) {
            totalIncome += balances[user] * INCOME_RATE / 100;
        }

        // Distribute income to all NFT holders
        for (address user in balances) {
            uint256 income = totalIncome * balances[user] / totalSupply();
            balances[user] += income;
            emit IncomeDistributed(user, income);
        }
    }

    // Function to return the total NFT supply
    function totalSupply() public view returns (uint256) {
        uint256 totalSupply = 0;
        for (address user in balances) {
            totalSupply += balances[user];
        }
        return totalSupply;
    }
}
